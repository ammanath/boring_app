import 'package:flutter_test/flutter_test.dart';
import 'package:hn_app/json_parse.dart';
void main() {
  test("parse top stories json", (){
    const jsonString = '[23516088,23516334,23515797,23514682,23514686,23516187,23515629,23513152,23512297,23514505,23498506,23512897,23506663,23513314,23514371,23513438,23496370,23515857,23512382,23516322,23511183,23508581,23515398,23515463,23512161,23508923,23506637,23496800,23508979,23514651,23503709,23516511,23511055,23511811,23514857,23515989,23514992,23498440,23510086,23515622,23513184,23488307,23514723,23502311,23507865,23510515,23501021,23498781,23515078,23497236,23509195,23496431,23506580,23514207,23489068,23514151,23515594,23512892,23507764,23497259,23508514,23494366,23514139,23490367,23514567,23505211,23506557,23514492,23514978,23514414,23497389,23498257,23515049,23515813,23512071,23508553,23492135,23510372,23511480,23508282,23497756,23510617,23506868,23511111,23512667,23509916,23509902,23500769,23504089,23508444,23496083,23507005,23491940,23497924,23498238,23510398,23505395,23509366,23497026,23511023,23498229,23496399,23497895,23496994,23509144,23496787,23495052,23498185,23501474,23497890,23502131,23506223,23497308,23489653,23514332,23493163,23500462,23504446,23514359,23507600,23494599,23504251,23508114,23505608,23505864,23504206,23494306,23514780,23503947,23505333,23497842,23502184,23514356,23505759,23507197,23492358,23496107,23507633,23492401,23511283,23516137,23488020,23494566,23497325,23493448,23511368,23500925,23491754,23504873,23487960,23492169,23508955,23499189,23510253,23487242,23511385,23513919,23507036,23497183,23510613,23495084,23503344,23488902,23496194,23513469,23511420,23507021,23502642,23505636,23487232,23501981,23500469,23503644,23490115,23494490,23503175,23510717,23508833,23502418,23493193,23493379,23508667,23501378,23508548,23515092,23494710,23508424,23511901,23496336,23488713,23487739,23487698,23492558,23487192,23505381,23487654,23504654,23488023,23492083,23510711,23504219,23492285,23509953,23492487,23491516,23494804,23505960,23505891,23488013,23500312,23487641,23490326,23510867,23496533,23503509,23513304,23488943,23490215,23491462,23493438,23492138,23506382,23512805,23511294,23490600,23489654,23511159,23498824,23500667,23502088,23487769,23490609,23487500,23499723,23494054,23490432,23505144,23488187,23506912,23487875,23488462,23505475,23489743,23511709,23509975,23503991,23506628,23501780,23491878,23507923,23505193,23508772,23508461,23490331,23493262,23508425,23510635,23499937,23504445,23505572,23499236,23504399,23499166,23509898,23489740,23490734,23496375,23514597,23501339,23511470,23499296,23488791,23504158,23504881,23504840,23491226,23488176,23491658,23493511,23508712,23500557,23507271,23506939,23489759,23491458,23506758,23494097,23487632,23495086,23504295,23512752,23493046,23498664,23494415,23505644,23492466,23507347,23500038,23499873,23493195,23505200,23502201,23507071,23504768,23497423,23502677,23501308,23489657,23502150,23506629,23489008,23501750,23506399,23493576,23487699,23500760,23499311,23502891,23489982,23505961,23502258,23500193,23491720,23501176,23509503,23504695,23494013,23504448,23490530,23502739,23489852,23492517,23503655,23505421,23496383,23491793,23498570,23493976,23492825,23495927,23499965,23495839,23492714,23489855,23491802,23495748,23491560,23491488,23506498,23500761,23490543,23494978,23493145,23504071,23498049,23489510,23497328,23495962,23494020,23493563,23490231,23493066,23491734,23504215,23495739,23492180,23501813,23490674,23490373,23493215,23502793,23489756,23494106,23505822,23488544,23506445,23490175,23494113,23493970,23493484,23493275,23493198,23503909,23492901,23491955,23502206,23490695,23490142,23499145,23501707,23487408,23494108,23499624,23497963,23492117,23490080,23492444,23488559,23498547,23493567,23490385,23493775,23488473,23489251,23493515,23502427,23500588,23497108,23488545,23500124,23493843,23500093,23500215,23491587,23487830,23491229]';

    expect(parseTopStories(jsonString).first, 23516088 );

  });

  test("parst item json", (){
    const jsonString = """
    {"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8952,8884,8887,8869,8958,8940,8908,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}
    """;

    expect(parseArticle(jsonString)?.by, 'dhouston');

  });

}